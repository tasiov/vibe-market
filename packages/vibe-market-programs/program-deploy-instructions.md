# Deploy Vibe Market Program

## Prerequisites:

You will need to have the Anchor framework installed locally to build the program before it can be deployed.

Install Rust:

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env
rustup component add rustfmt
```

Install Solana (can skip this if Solana already installed)

```bash
sh -c "$(curl -sSfL https://release.solana.com/v1.8.0/install)"
```

Install & Run Yarn

```bash
npm install -g yarn
yarn install
```

Install Anchor

**Make sure to install version 0.18.0**

```bash
cargo install --git https://github.com/project-serum/anchor --tag v0.18.0 anchor-cli --locked
```

Validate Anchor install

```bash
anchor --version
```

Additinal information on Anchor installation can be found here: https://project-serum.github.io/anchor/getting-started/installation.html

## Program deploy instructions:

You will need two keypairs to deploy the program:

- **Program Address** the keypair for the program address (already generated by you guys, does not need Sol)
- **Payer** the keypair that pays for the program deploy. These keys will also be the initial admin keys for the Vibe Market application (additional admins can be added within the application). Do not throw away this keypair. These keys need to have this filename, and they need to be found in `vibe-market/packages/vibe-market-programs/mainnet-wallet.json`. These keys need to be funded with Solana. Fund with 5 solana to be safe. These funds can be removed at a later time once other admins have been added in the application.

Steps:

1. Pull the latest commits from the master branch for this repo: `vibingstudio/vibe-market`
2. Navigate to the program directory `cd ./packages/vibe-market-programs`
3. Generate second keypair `solana-keygen new -o mainnet-wallet.json`
4. Make sure these keys are in `vibe-market/packages/vibe-market-programs/mainnet-wallet.json`
5. Fund these keys with 5 sol on mainnet
6. Build the program: `anchor build`
7. Take the Program Address keys (already generated) and place them in `./target/deploy/vibe_market-keypair.json`.
8. Deploy the program: `anchor deploy`
9. Deploy the IDL: `anchor idl init vXXYKPPwmERsfQPKEwhmnQBABVDoLUKRzz5LtLk9ndS -f target/idl/vibe_market.json`
10. Initialize Program Accounts: `yarn mainnet-migrate`

All done!

Please take screenshots of the terminal if you see errors.
